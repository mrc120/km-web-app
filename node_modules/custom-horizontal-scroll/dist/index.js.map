{"version":3,"file":"index.js","sources":["../src/customScroll.ts","../src/CustomScrollProvider.tsx"],"sourcesContent":["/**\n * Custom horizontal scroll bar with floating behavior\n */\n\nexport interface ICustomScroll {\n  id: string;\n  createScroll: () => void;\n  initScroll: () => void;\n  updateScroll: () => void;\n  updateScrollBottomHeight:(bottomHeight: string) => void;\n  updateCustomScrollWidthAndPosition: () => void;\n  updateScrollPosition: () => void;\n  updateCustomScrollPosition: () => void;\n  checkCustomScrollVisibility: () => void;\n  addListeners: () => void;\n  destroyScroll: () => void;\n}\n\nclass CustomScroll {\n  public element: HTMLElement;\n  public customScroll: HTMLElement;\n  public id: string;\n  public isVisible: boolean;\n  public scrollParent: HTMLElement | Window;\n  public bottomHeight?: string;\n  constructor(id: string, bottomHeight?: string) {\n    this.id = id;\n    this.bottomHeight = bottomHeight;\n    this.isVisible = false;\n    this.scrollParent = window;\n    this.element = document.getElementById(id) as HTMLElement;\n    this.customScroll = document.createElement(\"div\");\n  }\n\n  /**\n   * Custom scroll initialization\n   */\n  public initScroll = () => {\n    this.createScroll();\n    this.addListeners();\n  };\n\n  /**\n   * Update Custom scroll update\n   */\n  public updateScroll = () => {\n    if (this.element) {\n      this.customScroll.remove();\n      this.createScroll();\n      this.updateCustomScrollPosition();\n      this.customScroll.addEventListener(\"scroll\", this.updateScrollPosition);\n    }\n  };\n\n  /**\n   * Create a custom scroll element\n   */\n  public createScroll = () => {\n    this.element = document.getElementById(this.id) as HTMLElement;\n    if (this.element) {\n      this.element.style.overflowX = \"scroll\"\n      const scrollElement = document.createElement(\"div\");\n      scrollElement.style.bottom = \"0px\";\n      scrollElement.style.height = \"35px\";\n      scrollElement.style.overflow = \"auto\";\n      scrollElement.style.position = \"fixed\";\n      const inner = document.createElement(\"div\");\n      // Added * For Browser compatibility with Safari\n      inner.textContent = \"*\";\n      inner.style.height = \"1px\";\n      inner.style.overflow = \"hidden\";\n      inner.style.width = `${this.element.scrollWidth}px`;\n      scrollElement.appendChild(inner);\n      this.element.appendChild(scrollElement);\n      this.customScroll = scrollElement;\n      this.isVisible = true;\n      this.updateCustomScrollWidthAndPosition();\n      this.scrollParent = getScrollParent(this.element);\n      this.customScroll.style.bottom = this.calcScrollXRelativeHeight();\n    }\n  };\n\n  /**\n   * Update custom scroll bottom height\n   */\n  public updateScrollBottomHeight = (bottomHeight: string) => {\n    this.bottomHeight = bottomHeight\n  }\n\n/**\n* Calculate horizontal scroll position relative from nearest vertical scroll's bottom position\n*/\n  public calcScrollXRelativeHeight = () => {\n    const scrollXRelativeHeight = this.scrollParent &&\n        (this.scrollParent as HTMLElement).getBoundingClientRect ?\n        (this.scrollParent as HTMLElement).getBoundingClientRect().bottom: window.innerHeight\n    return `${window.innerHeight - scrollXRelativeHeight + Number(this.bottomHeight?.replace(\"px\",\"\"))}px`;\n  }\n\n  /**\n   * Update custom scroll width and position\n   */\n  public updateCustomScrollWidthAndPosition = () => {\n    if (this.element) {\n      this.customScroll.style.bottom = this.calcScrollXRelativeHeight(); \n      this.customScroll.style.width = `${this.element.offsetWidth}px`;\n      this.customScroll.style.left = `${Math.round(\n        this.element.getBoundingClientRect().left\n      )}px`;\n      this.checkCustomScrollVisibility();\n    }\n  };\n\n  /**\n   * Update default scroll position\n   */\n  public updateScrollPosition = () => {\n    if (this.element.scrollLeft !== this.customScroll.scrollLeft) {\n      this.element.scrollLeft = this.customScroll.scrollLeft;\n    }\n  };\n\n  /**\n   * Update custom scroll position\n   */\n  public updateCustomScrollPosition = () => {\n    if (this.element.scrollLeft !== this.customScroll.scrollLeft) {\n      this.customScroll.scrollLeft = this.element.scrollLeft;\n    }\n  };\n\n  /**\n   * Check the visibility of  custom scroll element\n   */\n  public checkCustomScrollVisibility = () => {\n    const maxVisibleY =\n    (this.scrollParent &&\n      (this.scrollParent as HTMLElement).getBoundingClientRect && \n      (this.scrollParent as HTMLElement).getBoundingClientRect().bottom) \n      || document.documentElement.clientHeight;\n    const contRect = this.element.getBoundingClientRect();\n    const relativeHeight = this.bottomHeight\n      ? Number(this.bottomHeight.replace(\"px\", \"\"))\n      : 0;\n    const isVisible =\n      contRect.bottom + relativeHeight > maxVisibleY &&\n      contRect.top + relativeHeight <= maxVisibleY;\n    if (this.isVisible !== isVisible) {\n      this.customScroll.style.visibility = isVisible ? \"visible\" : \"hidden\";\n    }\n    this.isVisible = isVisible;\n  };\n\n  /**\n   * Add listeners\n   */\n  public addListeners = () => {\n    if (this.element) {\n      this.element.addEventListener(\"scroll\", this.updateCustomScrollPosition);\n      this.customScroll.addEventListener(\"scroll\", this.updateScrollPosition);\n    if (this.scrollParent) {\n      this.scrollParent.addEventListener(\n        \"scroll\",\n        this.checkCustomScrollVisibility\n      );\n    }\n    window.addEventListener(\"resize\", this.updateCustomScrollWidthAndPosition);\n  }\n  };\n\n  /**\n   * Remove listeners\n   */\n  public destroyScroll = () => {\n    if (this.element) {\n      this.element.removeEventListener(\n        \"scroll\",\n        this.updateCustomScrollPosition\n      );\n      this.customScroll.removeEventListener(\n        \"scroll\",\n        this.updateScrollPosition\n      );\n      this.customScroll.remove();\n    }\n    if (this.scrollParent) {\n      this.scrollParent.removeEventListener(\n        \"scroll\",\n        this.checkCustomScrollVisibility\n      );\n    }\n    window.removeEventListener(\n      \"resize\",\n      this.updateCustomScrollWidthAndPosition\n    );\n  };\n}\n\n/**\n * Find the closest parent having scroll context.\n * Add scroll listener to this element for checking scroll visibility.\n * As per the current requirement either modal or window having the scroll.\n * @param element\n */\nconst getScrollParent = (element: HTMLElement) => {\n  let scrollElement = element;\n  while (scrollElement && scrollElement !== document.body) {\n    if (scrollElement.classList.contains(\"vertical-scroll\")) {\n      return scrollElement;\n    }\n    scrollElement = scrollElement.parentElement as HTMLElement;\n  }\n  return window;\n};\n\nexport default CustomScroll;\n","import * as React from \"react\";\nimport CustomScroll, { ICustomScroll } from \"./customScroll\";\n\n\nexport type IExternalProps = any;\n\nexport interface IWithCustomScroll {\n  customScroll: Pick<ICustomScroll, \"id\" | \"updateScrollBottomHeight\">;\n}\n\nconst withCustomScroll = (Component: React.ComponentType<IWithCustomScroll>) => (\n  props: IExternalProps\n) => {\n  // A unique id which represent each instance of custom scroll\n  const uniqueId = `custom-scroll-${Date.now()}-${Math.random().toString().slice(2)}`;\n  const [id] = React.useState(uniqueId);\n  const [customScroll] = React.useState(() =>\n      new CustomScroll(id, \"0px\")\n  );\n  if (customScroll) {\n    React.useEffect(() => {\n      // Add Scroll element\n      customScroll.initScroll();\n      return () => {\n        // Remove Scroll element\n        customScroll.destroyScroll();\n      };\n    }, []);\n    React.useEffect(\n      () => {\n        // Update Scroll element\n        customScroll.updateScroll();\n      },\n      [props.children]\n    );\n  }\n  return <Component {...props} customScroll={customScroll} />;\n};\n\nexport default withCustomScroll;"],"names":["React.useState","React.useEffect","React.createElement"],"mappings":"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"}